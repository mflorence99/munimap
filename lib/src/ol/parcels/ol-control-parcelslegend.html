<article
  #legend
  [ngClass]="{ 'ol-legend-print': printing, 'ol-legend-screen': !printing }"
  class="legend ol-legend ol-unselectable ol-control"
>
  <header class="header">
    <h1 class="title">{{ title }}</h1>
    <h2 class="subtitle">{{ county }} Co</h2>
    <h2 class="subtitle">{{ state }}</h2>
    <h3 class="link">{{ id }}.munimap.online</h3>
  </header>

  <table class="areaByUsage">
    <thead>
      <tr>
        <th></th>
        <th></th>
        <th class="numeric">Acres</th>
      </tr>
    </thead>

    <tbody>
      <ng-container
        *ngFor="let usage of parcelPropertiesUsage | keyvalue; trackBy: trackByKeyValue"
      >
        <tr *ngIf="areaByUsage[usage.key]">
          <td class="usage">
            <figure
              [style.backgroundColor]="'rgba(var(--map-parcel-fill-u' + usage.key + '), 0.25)'"
              class="key"
            ></figure>
          </td>
          <td class="desc">{{ usage.value }}</td>
          <td class="numeric">
            {{ areaByUsage[usage.key] | number: '1.0-0' }}
          </td>
        </tr>

        <tr *ngIf="usage.key === '190'">
          <td></td>
          <td class="use">
            <article class="keys">
              <ng-container
                *ngFor="let use of parcelPropertiesUse | keyvalue; trackBy: trackByKeyValue"
              >
                <!-- ðŸ”¥ TEMPORARY -- WASHINGTON ONLY -->
                <figure
                  *ngIf="['CUFL', 'CUMH', 'CUMW', 'CUUH', 'CUUW', 'CUWL'].includes(use.key)"
                  class="key"
                >
                  <img
                    [src]="'assets/legend/' + use.key +'.png'"
                    class="icon"
                  />
                  <figcaption>{{ use.value }}</figcaption>
                </figure>
              </ng-container>
            </article>
          </td>
          <td></td>
        </tr>
      </ng-container>

      <tr>
        <td></td>
        <td class="desc">Lakes, ponds, rights of way</td>
        <td class="numeric">
          {{ areaOfTown - areaOfParcels | number: '1.0-0' }}
        </td>
      </tr>

      <tr>
        <td></td>
        <td class="des">
          <article class="keys">
            <figure class="key">
              <img [src]="'assets/legend/floodplain.png'" class="icon" />
              <figcaption>FEMA Floodplain</figcaption>
            </figure>

            <figure class="key">
              <img [src]="'assets/legend/CUWL.png'" class="icon" />
              <figcaption>Wetland</figcaption>
            </figure>
          </article>
        </td>
        <td></td>
      </tr>

      <tr class="total">
        <td></td>
        <td class="desc">Total</td>
        <td class="numeric">{{ areaOfTown | number: '1.0-0' }}</td>
      </tr>
    </tbody>
  </table>
</article>
