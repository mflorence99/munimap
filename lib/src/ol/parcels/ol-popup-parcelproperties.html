<button (click)="onClose()" class="closer" mat-icon-button>
  <fa-icon [icon]="['fas', 'times']" size="lg"></fa-icon>
</button>

@if (canClipboard()) {
<button (click)="onClipboard()" class="clipboard" mat-icon-button>
  <fa-icon [icon]="['far', 'clipboard']" size="lg"></fa-icon>
</button>
}

<section
  #tables
  [class.splitHorizontally]="splitHorizontally"
  [class.splitVertically]="splitVertically"
  class="tables"
>
  @if (properties.length > 0) {
  <aside class="wrapper">
    <table class="properties">
      <thead>
        <tr>
          <th></th>
          @for (property of properties; track property) {

          <th>
            {{ property.id }} @if (['N-U', 'N-V',
            'N-W'].includes(property.neighborhood) && ['110',
            '120'].includes(property.usage)) {
            <mark>VACANT</mark>
            }
          </th>

          }
        </tr>
      </thead>

      <tbody>
        @if (sameAddress) {
        <tr>
          <td>Address</td>
          <td [attr.colspan]="properties.length">
            {{ properties[0].address }}
          </td>
        </tr>
        } @if (sameOwner) {
        <tr>
          <td>Owner</td>
          <td [attr.colspan]="properties.length">{{ properties[0].owner }}</td>
        </tr>
        } @if (sameOwner && properties[0].addressOfOwner) {
        <tr>
          <td></td>
          <td [attr.colspan]="properties.length" class="wrappable">
            {{ properties[0].addressOfOwner }}
          </td>
        </tr>
        } @if (sameUsage) {
        <tr>
          <td>Land use</td>
          <td [attr.colspan]="properties.length">
            {{ parcelPropertiesUsage[properties[0].usage] }} @if
            (properties[0].usage === '190') {
            <span>
              &nbsp;&mdash;&nbsp;{{ parcelPropertiesUse[properties[0].use] }}
            </span>
            }
          </td>
        </tr>
        }

        <tr>
          <td>Area</td>
          @for (property of properties; track property) {

          <td>{{ property.area | number:'1.0-2' }} ac</td>

          }
        </tr>

        <tr>
          <td>Building</td>
          @for (property of properties; track property) {

          <td>{{ property.building$ | currency:'USD':'symbol':'1.0-0' }}</td>

          }
        </tr>

        <tr>
          <td>Land</td>
          @for (property of properties; track property) {

          <td>{{ property.land$ | currency:'USD':'symbol':'1.0-0' }}</td>

          }
        </tr>

        <tr>
          <td>Other</td>
          @for (property of properties; track property) {

          <td>{{ property.other$ | currency:'USD':'symbol':'1.0-0' }}</td>

          }
        </tr>

        <tr>
          <td>Total</td>
          @for (property of properties; track property) {

          <td>{{ property.taxed$ | currency:'USD':'symbol':'1.0-0' }}</td>

          }
        </tr>

        <tr>
          <td></td>
          @for (property of properties; track property) {

          <td>
            <a [href]="googleLink(property)" target="_blank">Google view</a>
          </td>

          }
        </tr>
      </tbody>
    </table>
  </aside>
  } @if (abutters.length > 0) {
  <aside class="wrapper">
    <table class="abutters">
      <thead>
        <tr>
          <th></th>
          <th>Abutters</th>
        </tr>
      </thead>

      <tbody>
        @for (abutter of abutters; track abutter) {

        <tr>
          <td>
            <a (click)="onSelect(abutter.id)">{{ abutter.id }}</a>
          </td>
          <td>{{ abutter.owner ?? abutter.address }}</td>
        </tr>
        @if (abutter.addressOfOwner ) {
        <tr>
          <td></td>
          <td class="wrappable">{{ abutter.addressOfOwner }}</td>
        </tr>
        } }
      </tbody>
    </table>
  </aside>
  }
</section>
