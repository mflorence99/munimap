<button (click)="onClose()" class="closer" mat-icon-button>
  <fa-icon [icon]="['fas', 'times']" size="lg"></fa-icon>
</button>

<button (click)="onClipboard()" class="clipboard" mat-icon-button>
  <fa-icon [icon]="['far', 'clipboard']" size="lg"></fa-icon>
</button>

<section
  #tables
  [class.splitHorizontally]="splitHorizontally"
  [class.splitVertically]="splitVertically"
  class="tables"
>
  <aside *ngIf="properties.length > 0">
    <table class="properties">
      <thead>
        <tr>
          <td></td>
          <ng-container *ngFor="let property of properties">
            <td>
              {{ property.id }}

              <mark
                *ngIf="['U', 'V', 'W'].includes(property.neighborhood) && ['110', '120'].includes(property.usage)"
                >VACANT</mark
              >
            </td>
          </ng-container>
        </tr>
      </thead>

      <tbody>
        <tr *ngIf="sameAddress">
          <td>Address</td>
          <td [attr.colspan]="properties.length">
            {{ properties[0].address }}
          </td>
        </tr>

        <tr *ngIf="sameOwner">
          <td>Owner</td>
          <td [attr.colspan]="properties.length">{{ properties[0].owner }}</td>
        </tr>

        <tr *ngIf="sameUsage">
          <td>Land use</td>
          <td [attr.colspan]="properties.length">
            {{ registry.decode('parcel', 'usage', properties[0].usage) }}
            <span *ngIf="properties[0].usage === '190'">
              &nbsp;&mdash;&nbsp;{{ registry.decode('parcel', 'use',
              properties[0].use) }}
            </span>
          </td>
        </tr>

        <tr>
          <td>Area</td>
          <ng-container *ngFor="let property of properties">
            <td>
              <span *ngIf="property.area >= 4"
                >{{ property.area | number:'1.0-2' }} ac ({{ sum(property.areas)
                | number:'1.0-2' }} ac)<span
                  class="reference"
                  matTooltip="Calculated from perimeter and may not match
  survey"
                  matTooltipPosition="right"
                  >*</span
                >
              </span>
              <span *ngIf="property.area < 4"
                >{{ property.area * 43560 | number:'1.0-0' }} sq ft ({{
                sum(property.areas) * 43560 | number:'1.0-0' }} sq ft)<span
                  class="reference"
                  matTooltip="Calculated from perimeter and may not match
  survey"
                  matTooltipPosition="right"
                  >*</span
                ></span
              >
            </td>
          </ng-container>
        </tr>

        <tr>
          <td>Building</td>
          <ng-container *ngFor="let property of properties">
            <td>{{ property.building$ | currency:'USD':'symbol':'1.0-0' }}</td>
          </ng-container>
        </tr>

        <tr>
          <td>Land</td>
          <ng-container *ngFor="let property of properties">
            <td>{{ property.land$ | currency:'USD':'symbol':'1.0-0' }}</td>
          </ng-container>
        </tr>

        <tr>
          <td>Other</td>
          <ng-container *ngFor="let property of properties">
            <td>{{ property.other$ | currency:'USD':'symbol':'1.0-0' }}</td>
          </ng-container>
        </tr>

        <tr>
          <td>Total</td>
          <ng-container *ngFor="let property of properties">
            <td>{{ property.taxed$ | currency:'USD':'symbol':'1.0-0' }}</td>
          </ng-container>
        </tr>

        <tr>
          <td></td>
          <ng-container *ngFor="let property of properties">
            <td>
              <a [href]="googleLink(property)" target="_blank">Google view</a>
            </td>
          </ng-container>
        </tr>
      </tbody>
    </table>
  </aside>

  <aside *ngIf="abutters.length > 0" class="wrapper">
    <table class="abutters">
      <thead>
        <tr>
          <td></td>
          <td>Abutters</td>
        </tr>
      </thead>

      <tbody>
        <tr *ngFor="let abutter of abutters">
          <td>{{ abutter.id }}</td>
          <td>{{ abutter.owner ?? abutter.address }}</td>
        </tr>
      </tbody>
    </table>
  </aside>
</section>
