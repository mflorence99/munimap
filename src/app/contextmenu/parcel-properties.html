<header class="header">
  <img class="icon" mat-card-avatar src="assets/properties.svg" />
  <p class="title">Lorem ipsum dolor emit</p>
  <p class="subtitle">{{ selectedIDs.join(', ') }}</p>
</header>

<form
  #propertiesForm="ngForm"
  autocomplete="off"
  class="form"
  novalidate
  spellcheck="false"
>
  <p>
    Lorem ipsum dolor sit amet, consectetur adipiscing elit. Proin vel metus eu
    nunc lacinia feugiat. Morbi molestie mi in odio laoreet aliquet.
  </p>

  <ng-container *ngFor="let value of (record | values); trackBy: trackByProp">
    <!-- 
      ðŸ‘‡ this control for props with a list 
        NOTE: use only appears if usage === current use
    -->
    <mat-form-field
      *ngIf="value.list && (value.prop !== 'use' || record.usage.fromFeatures === '190' || record.usage.fromParcels === '190')"
      floatLabel="always"
    >
      <mat-label>{{ value.label }}</mat-label>
      <mat-select
        [(ngModel)]="value.fromParcels"
        [attr.ngControl]="value.prop"
        [name]="value.prop"
        [placeholder]="registry.decode('parcel', value.prop, value.fromFeatures)"
      >
        <mat-option *ngFor="let option of value.list" [value]="option[0]">
          {{ option[1].decoding }}
        </mat-option>
      </mat-select>
      <mat-icon *ngIf="value.conflict" [inline]="true" color="accent" matSuffix
        >warning</mat-icon
      >
      <button
        (click)="clear($event, record, value.prop)"
        [disabled]="!value.fromParcels"
        mat-icon-button
        matSuffix
      >
        <mat-icon>close</mat-icon>
      </button>
    </mat-form-field>

    <!-- ðŸ‘‡ this control for type-in props -->
    <mat-form-field *ngIf="!value.list" floatLabel="always">
      <mat-label>{{ value.label }}</mat-label>
      <input
        [(ngModel)]="value.fromParcels"
        [attr.ngControl]="value.prop"
        [name]="value.prop"
        [placeholder]="value.fromFeatures"
        [type]="value.type ?? 'text'"
        [step]="value.step"
        matInput
      />
      <mat-icon *ngIf="value.conflict" [inline]="true" color="accent" matSuffix
        >warning</mat-icon
      >
      <button
        (click)="clear($event, record, value.prop)"
        [disabled]="!value.fromParcels"
        mat-icon-button
        matSuffix
      >
        <mat-icon>close</mat-icon>
      </button>
    </mat-form-field>
  </ng-container>
</form>

<article class="actions">
  <button (click)="done()" mat-flat-button>DONE</button>

  <button
    (click)="save(record)"
    [disabled]="!propertiesForm.dirty"
    color="primary"
    mat-flat-button
  >
    SAVE
  </button>
</article>
