<app-ol-map #map [view]="view$ | async">
  <ng-container *ngIf="map.initialized">
    <app-ol-control-attribution></app-ol-control-attribution>
    <app-ol-control-zoom></app-ol-control-zoom>
    <app-ol-control-zoom2extent></app-ol-control-zoom2extent>

    <!-- BG LAYER -->

    <app-ol-layer-tile>
      <app-ol-source-osm></app-ol-source-osm>
      <app-ol-filter-pencil></app-ol-filter-pencil>
    </app-ol-layer-tile>

    <!-- <app-ol-layer-mapbox styleUrl="mapbox://styles/mapbox/light-v9">
      <app-ol-filter-crop></app-ol-filter-crop>
    </app-ol-layer-mapbox> -->

    <!-- BASE LAYER PUNCHED OUT BY BOUNDARY -->

    <!-- <app-ol-layer-tile>
      <app-ol-source-osm></app-ol-source-osm>
      <app-ol-filter-crop></app-ol-filter-crop>
      <app-ol-filter-enhance [value]="0.33"></app-ol-filter-enhance>
    </app-ol-layer-tile> -->

    <!-- <app-ol-layer-tile>
      <app-ol-source-xyz
        [url]="'http://mt0.google.com/vt/lyrs=m&x={x}&y={y}&z={z}'"
        ><app-ol-attribution>Â© Google</app-ol-attribution></app-ol-source-xyz
      >
      <app-ol-filter-crop></app-ol-filter-crop>
      <app-ol-filter-enhance [value]="0.33"></app-ol-filter-enhance>
    </app-ol-layer-tile> -->

    <!-- <app-ol-layer-tile>
      <app-ol-source-xyz
        [url]="'https://server.arcgisonline.com/ArcGIS/rest/services/World_Topo_Map/MapServer/tile/{z}/{y}/{x}'"
        ><app-ol-attribution
          >Powered by Esri</app-ol-attribution
        ></app-ol-source-xyz
      >
      <app-ol-filter-crop></app-ol-filter-crop>
      <app-ol-filter-enhance [value]="0.33"></app-ol-filter-enhance>
    </app-ol-layer-tile> -->

    <app-ol-layer-mapbox styleUrl="mapbox://styles/mapbox/bright-v9">
      <app-ol-filter-crop></app-ol-filter-crop>
    </app-ol-layer-mapbox>

    <!-- HILLSHADE LAYER -->

    <app-ol-layer-tile [opacity]="0.33">
      <app-ol-source-xyz
        [url]="'https://server.arcgisonline.com/ArcGIS/rest/services/Elevation/World_Hillshade/MapServer/tile/{z}/{y}/{x}'"
      >
        <app-ol-attribution>Powered by Esri</app-ol-attribution>
      </app-ol-source-xyz>
    </app-ol-layer-tile>

    <!-- SELECTABLES LAYER -->

    <app-ol-layer-vector [styler]="style.featureOutline()">
      <app-ol-source-geojson [layerKey]="'selectables'"></app-ol-source-geojson>

      <app-ol-interaction-select
        [eventType]="'pointermove'"
        [styler]="style.featureSelect()"
      >
      </app-ol-interaction-select>

      <app-ol-interaction-select
        (select)="onSelect($event)"
        [eventType]="'click'"
      >
      </app-ol-interaction-select>
    </app-ol-layer-vector>

    <!-- BOUNDARY LAYER -->

    <!-- <app-ol-layer-vector>
      <app-ol-source-boundary></app-ol-source-boundary>
    </app-ol-layer-vector> -->
  </ng-container>
</app-ol-map>
