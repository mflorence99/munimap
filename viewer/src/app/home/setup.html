<header class="header">
  <figure class="icon palette">
    <fa-icon [icon]="['fad', 'palette']" size="2x"></fa-icon>
  </figure>

  <p class="title">Parcel overlay</p>
  <p class="subtitle">Customized parcel color-coding</p>
</header>

<form
  #setupForm="ngForm"
  autocomplete="off"
  class="form"
  novalidate
  spellcheck="false"
>
  <p class="instructions">
    Select a parcel attribute, then a custom color to <em>fill</em> the interior
    and/or draw the boundary <em>line</em>.
  </p>

  <section class="properties">
    <div></div>
    <div></div>
    <div>Fill</div>
    <div>Line</div>

    <ng-container
      *ngFor="let property of record; let ix = index; trackBy: trackByProp"
    >
      <p class="caption">{{ schema[ix].caption }}</p>

      <mat-checkbox
        (change)="onPropertyEnabled(property, $event.checked)"
        [checked]="property.enabled"
      ></mat-checkbox>

      <article
        (click)="pick([property, 'fill'])"
        [class.selected]="isPicked([property, 'fill'])"
        [style.background]="property.fill"
        class="picker"
      ></article>

      <article
        (click)="pick([property, 'stroke'])"
        [class.selected]="isPicked([property, 'stroke'])"
        [style.background]="property.stroke"
        class="picker"
      ></article>
    </ng-container>
  </section>

  <br />

  <article
    (colorPickerCancel)="onColorPickerChange('')"
    (colorPickerChange)="onColorPickerChange($event)"
    [colorPicker]="currentColor()"
    [cpAlphaChannel]="'disabled'"
    [cpCancelButton]="true"
    [cpCancelButtonText]="'Clear'"
    [cpDialogDisplay]="'inline'"
    [cpDisableInput]="true"
    [cpFallbackColor]="''"
    [cpToggle]="true"
  ></article>
</form>

<article class="actions">
  <button (click)="done()" mat-flat-button>DONE</button>

  <button
    (click)="save(record)"
    [disabled]="!setupForm.dirty"
    color="primary"
    mat-flat-button
  >
    SAVE
  </button>
</article>
