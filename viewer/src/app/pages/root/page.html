<main class="page">
  <mat-toolbar class="toolbar">
    @if (hasLeftSidebar) {
    <button (click)="leftSidebar.toggle()" mat-icon-button>
      <fa-icon [icon]="['fas', 'bars']" size="2x"></fa-icon>
    </button>
    }

    <h1 class="title">@if (title) { {{ title }} }</h1>

    <div class="filler"></div>

    <mat-button-toggle
      #satelliteViewToggle
      (change)="onSatelliteViewToggle(satelliteViewToggle.checked)"
      [checked]="satelliteView$ | async">
      <fa-icon [icon]="['fad', 'globe-americas']" size="lg"></fa-icon>
      @if (canPickSatelliteYear()) { &nbsp;
      <select
        (change)="onSatelliteYear($event.target.value)"
        (click)="eatMe($event)"
        [disabled]="!(satelliteView$ | async)">
        @for (year of satelliteYears; track year) {

        <option
          [attr.selected]="year === (satelliteYear$ | async) ? 'true' : null"
          [value]="year">
          {{ year || 'Latest' }}
        </option>

        }
      </select>

      }
    </mat-button-toggle>

    <mat-button-toggle
      #gpsToggle
      (change)="onGPSToggle(gpsToggle.checked)"
      [checked]="gps$ | async">
      <fa-icon [icon]="['fad', 'map-marker-alt']" size="lg"></fa-icon>
    </mat-button-toggle>

    @if (hasRightSidebar) {
    <mat-button-toggle
      (change)="rightSidebar.toggle()"
      [checked]="rightSidebar.opened">
      <fa-icon [icon]="['fad', 'palette']" size="lg"></fa-icon>
    </mat-button-toggle>
    } @if (!hasLeftSidebar) {
    <button (click)="reset()" mat-icon-button>
      <fa-icon [icon]="['fas', 'sync']" size="2x"></fa-icon>
    </button>
    }
  </mat-toolbar>

  <mat-drawer-container class="container">
    <mat-drawer #leftSidebar class="sidebar" mode="over" position="start">
      <router-outlet name="leftSidebar"></router-outlet>
    </mat-drawer>

    <mat-drawer #rightSidebar class="sidebar" mode="over" position="end">
      <router-outlet name="rightSidebar"></router-outlet>
    </mat-drawer>

    <mat-drawer-content class="content">
      <router-outlet></router-outlet>
    </mat-drawer-content>
  </mat-drawer-container>
</main>
