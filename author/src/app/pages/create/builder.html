<mat-card appearance="outlined" class="card">
  <mat-card-header>
    <img src="assets/favicon.svg" mat-card-avatar />
    <mat-card-title>Create a New Map</mat-card-title>
    <mat-card-subtitle>
      Use map or dropdowns to drill down to a town
    </mat-card-subtitle>
  </mat-card-header>

  <mat-card-content>
    <form
      #filterForm="ngForm"
      (submit)="submit()"
      autocomplete="off"
      class="form"
      id="filterForm"
      novalidate
      spellcheck="false">
      <mat-form-field>
        <mat-label>Select Map Type</mat-label>
        <mat-select
          [appAutoFocus]="true"
          (selectionChange)="switchType($event.value)"
          [disabled]="currentTown()"
          [value]="currentType()">
          <mat-option value="parcels">Parcels</mat-option>
          <mat-option value="topo">Topographic</mat-option>
          <mat-option value="dpw">DPW</mat-option>
          <mat-option value="night">Nighttime</mat-option>
        </mat-select>
      </mat-form-field>

      <mat-form-field>
        <mat-label>Select a County</mat-label>
        <mat-select
          (selectionChange)="switchCounty($event.value)"
          [value]="currentCounty()">
          @for (county of allCounties(); track county) {
          <mat-option [value]="county">{{ county }}</mat-option>
          }
        </mat-select>
      </mat-form-field>

      <mat-form-field>
        <mat-label>Select a Town</mat-label>
        <mat-select
          (selectionChange)="switchTown($event.value)"
          [value]="currentTown()">
          @for (town of allTowns(); track town) {
          <mat-option [value]="town">{{ town }}</mat-option>
          }
        </mat-select>
      </mat-form-field>
    </form>
  </mat-card-content>

  <mat-card-actions class="actions">
    @if (currentCounty()) {
    <a (click)="reset()" mat-flat-button>Start Over</a>
    }

    <div class="filler"></div>

    <button
      [disabled]="!currentTown()"
      color="primary"
      form="filterForm"
      mat-flat-button
      type="submit">
      NEXT
    </button>
  </mat-card-actions>
</mat-card>
